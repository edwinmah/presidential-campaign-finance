!function(t,a,e){"use strict";var o={};o.NS="A11yModal",o.AUTHOR="Scott O'Hara",o.VERION="2.2.1",o.DOCUMENTATION="https://github.com/scottaohara/accessible_modal_window",o.LICENSE="https://github.com/scottaohara/accessible_modal_window/blob/master/LICENSE";var r='[data-action="modal-open"]',i=".a11y-modal",n="modal",d="."+n,l="[data-modal-title]",s="[data-modal-close]",c="data-add-style",f="modal-is-open",h='<button type="button" data-modal-close class="modal__outro__close"><svg role="presentation" viewBox="0 0 20 20" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M10.707 10.5l8.646-8.646a.5.5 0 0 0-.707-.707L10 9.793 1.354 1.147a.5.5 0 0 0-.707.707L9.293 10.5.647 19.146a.5.5 0 0 0 .708.707l8.646-8.646 8.646 8.646a.498.498 0 0 0 .708 0 .5.5 0 0 0 0-.707L10.709 10.5z"/></svg></button>',u=t("html"),b="a11y_body_wrap",g="default",m="Dialog Window";t.fn.extend({a11yModal:function(a){return this.each(function(){"default"!==g&&(b=g);var a=this.id,e=t("#"+a),o=function(){e.each(function(){var a,o=t(this),r=o.find(l),i=o.find(":header");"true"===o.attr("data-modal-alert")?o.attr({role:"alertdialog"}):o.attr({role:"dialog"}),o.attr("tabindex","-1"),o.find(d).attr("tabindex","-1"),e[0].hasAttribute("aria-label")||(r.length?a=r.attr("id"):i.length&&(i.first().attr("id")?a=i.first().attr("id"):(a=o.attr("id")+"_title",i.first().attr("id",a))),o.attr("aria-labelledby",a))}),e.find(d).each(function(){var a=t(this);a.attr({role:"document"}),a.find(s).length||(a.find(".modal__outro").length?a.find(".modal__outro").append(h):a.append(h)),a.find(s).attr({"aria-label":"Close Modal"})})},p=function(){t(r).each(function(){var a,e,o=t(this);if(o.attr("href")&&o.attr("role","button"),!o.attr("aria-controls"))if(o.attr("data-modal-open"))a=o.attr("data-modal-open"),o.attr("aria-controls",a);else{if(!o.attr("href"))return console.log("No target set. A target is set by setting the value of an aria-controls attribute, which if absent, can be generated by the trigger's href URI, or a data-modal-open attribute to the value of the modal window ID you are attempting to open."),!1;a=o.attr("href").split("#")[1],o.attr("aria-controls",a)}e=t("#"+o.attr("aria-controls")),"true"===o.attr("data-modal-alert")&&"alertdialog"!==e.attr("role")&&e.attr("role","alertdialog")})},v=function(){var a=t("body"),e='<div id="'+b+'" />';"default"===g&&t("body > *").wrapAll(e),a.prepend(t(i))},y=function(a){var e=t(this),o=t("#"+e.attr("aria-controls"));if(e[0].hasAttribute(c)){var r=t(this).attr(c);o.find(d).attr("class",n+" "+r)}o[0].hasAttribute("aria-labelledby")||o[0].hasAttribute("aria-label")||(e[0].hasAttribute("data-set-modal-title")&&(m=e.attr("data-set-modal-title")),o.attr("aria-label",m)),C(),a.preventDefault(),o.attr("aria-hidden","false"),u.addClass(f),t("body").find("#"+b).attr("aria-hidden","true"),o.find(d).focus()},w=function(a){var o=t('[aria-controls="'+e.attr("id")+'"]');a.preventDefault(),u.removeClass(f),e.attr("aria-hidden","true"),t("body").find("#"+b).removeAttr("aria-hidden"),o.focus()},_=function(t){t.target===e.find(d).parent().get(0)&&w(t)},A=function(a){var e=a.keyCode||a.which;switch(e){case 32:case 13:a.stopPropagation(),t(this).trigger("click")}},k=function(a){var o=a.keyCode||a.which;if(u.hasClass(f))switch(o){case 9:!a.shiftKey&&e.find(s).is(":focus")&&t(d).focus();break;case 27:w(a);break;case 32:case 13:e.find(s).is(":focus")&&(a.stopPropagation(),w(a))}},C=function(){var a=e.find(d),o=e.find(s);t(document).on("focusin."+e,function(t){a[0]===t.target||a.has(t.target).length||o.focus()})};v(),o(),p(),e.on("keydown",k.bind(this)),e.on("click touchstart",_.bind(this)),e.find(s).on("click",w.bind(this)),t(document).on("click",r,y),t(document).on("keydown",r,A)})}}),t(i).a11yModal()}(jQuery,this,this.document);
